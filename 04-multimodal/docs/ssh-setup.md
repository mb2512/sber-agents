# Настройка SSH подключения к серверу

## Проблема: Permission denied (publickey)

Сервер настроен на аутентификацию только по SSH-ключам. Нужно настроить SSH-ключ.

## Решение 1: Создание и настройка SSH-ключа

### Шаг 1: Проверьте, есть ли у вас SSH-ключ

```bash
ls -la ~/.ssh/id_rsa.pub
# или
ls -la ~/.ssh/id_ed25519.pub
```

Если файл существует, переходите к шагу 3.

### Шаг 2: Создайте SSH-ключ (если его нет)

```bash
# Создание нового SSH-ключа (рекомендуется ED25519)
ssh-keygen -t ed25519 -C "your_email@example.com"

# Или если ED25519 не поддерживается:
ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
```

Нажмите Enter для всех вопросов (или укажите пароль для ключа).

### Шаг 3: Скопируйте публичный ключ на сервер

**Вариант A: Если у вас есть доступ к серверу другим способом**

1. Скопируйте содержимое публичного ключа:
   ```bash
   cat ~/.ssh/id_ed25519.pub
   # или
   cat ~/.ssh/id_rsa.pub
   ```

2. Подключитесь к серверу другим способом (через консоль провайдера, другой пользователь и т.д.)

3. Добавьте ключ на сервере:
   ```bash
   mkdir -p ~/.ssh
   chmod 700 ~/.ssh
   echo "ВАШ_ПУБЛИЧНЫЙ_КЛЮЧ" >> ~/.ssh/authorized_keys
   chmod 600 ~/.ssh/authorized_keys
   ```

**Вариант B: Использование ssh-copy-id (если парольная аутентификация временно разрешена)**

```bash
ssh-copy-id user@195.209.210.204
```

**Вариант C: Через консоль провайдера**

Если у вас есть доступ к консоли сервера через панель управления провайдера:
1. Войдите через веб-консоль
2. Выполните команды из варианта A

## Решение 2: Проверка правильного имени пользователя

Возможно, нужно использовать другое имя пользователя. Попробуйте:

```bash
# Стандартные имена пользователей для разных ОС:
ssh root@195.209.210.204
ssh ubuntu@195.209.210.204
ssh admin@195.209.210.204
ssh debian@195.209.210.204
ssh centos@195.209.210.204
```

## Решение 3: Использование существующего ключа

Если у вас уже есть SSH-ключ, но он не используется автоматически:

```bash
# Укажите ключ явно
ssh -i ~/.ssh/id_rsa user@195.209.210.204
# или
ssh -i ~/.ssh/id_ed25519 user@195.209.210.204
```

## Решение 4: Временное включение парольной аутентификации

Если у вас есть доступ к серверу через консоль провайдера:

1. Войдите через веб-консоль
2. Отредактируйте SSH конфигурацию:
   ```bash
   sudo nano /etc/ssh/sshd_config
   ```

3. Найдите и измените:
   ```
   PasswordAuthentication no
   ```
   на:
   ```
   PasswordAuthentication yes
   ```

4. Перезапустите SSH:
   ```bash
   sudo systemctl restart sshd
   ```

5. Подключитесь с паролем:
   ```bash
   ssh user@195.209.210.204
   ```

6. После настройки ключа верните обратно `PasswordAuthentication no` и перезапустите SSH.

## Проверка подключения

После настройки ключа:

```bash
ssh user@195.209.210.204
```

Должно подключиться без запроса пароля.

## Настройка SSH config (опционально)

Для удобства создайте файл `~/.ssh/config`:

```bash
nano ~/.ssh/config
```

Добавьте:

```
Host finance-bot
    HostName 195.209.210.204
    User user
    IdentityFile ~/.ssh/id_ed25519
```

Теперь можно подключаться просто:
```bash
ssh finance-bot
```

## Если ничего не помогает

1. **Свяжитесь с провайдером сервера** - они могут предоставить:
   - Правильное имя пользователя
   - Способ первоначального доступа
   - Инструкции по настройке SSH

2. **Проверьте панель управления** - многие провайдеры позволяют:
   - Скачать SSH-ключ
   - Настроить доступ через веб-интерфейс
   - Получить временный пароль

3. **Проверьте документацию провайдера** по настройке SSH для нового сервера

