# Идея: Персональный финансовый советник

## Описание проекта

Персональный финансовый советник реализован в виде Telegram-бота на базе LLM-ассистента.

## Основная задача

Бот ведет учет доходов и расходов пользователя на основе сообщений в чате, автоматически извлекая из них структурированные данные о финансовых транзакциях. Предоставляет отчеты о балансе по запросу.

## Ключевые особенности

- **Платформа**: Telegram
- **Функционал**: 
  - Ведение таблицы учета доходов и расходов
  - Автоматическое извлечение данных о транзакциях из текстовых сообщений
  - **Обработка голосовых сообщений** с транскрибацией речи в текст
  - Обработка изображений (чеки, скриншоты выписок банков)
  - Обогащение транзакций метаданными (геометки, теги, заметки)
  - Формирование отчетов о балансе
- **Технологии**: 
  - LLM со structured output для обработки текстовых сообщений
  - **Speech-to-Text (STT)** для транскрибации голосовых сообщений
  - VLM для обработки изображений
  - Поддержка переключения между внешними и локальными моделями

## Расширение функционала: Обработка голосовых сообщений

### Новая возможность:
- **Голосовые транзакции**: Пользователи могут отправлять голосовые сообщения о расходах/доходах (включая краткие заметки и уточнения)
- **Автоматическая транскрибация**: Конвертация речи в текст с последующим анализом транзакций, нормализацией валюты и даты
- **Мультимодальный ввод**: Поддержка текстовых, голосовых сообщений и изображений
- **Контекстные подсказки**: После транскрибации бот уточняет спорные данные (сумма/дата/категория) короткими follow-up вопросами

### Ценность:
- Удобство мобильного использования - можно быстро надиктовать транзакцию
- Естественный способ ввода транзакций "на ходу"
- Увеличение engagement пользователей за счет голосового интерфейса
- Поддержка различных сценариев использования (в машине, на прогулке, во время занятий спортом)
- Рост точности учета за счет автоматического выделения ключевых сущностей из речи

### Техническая реализация:
- Интеграция с OpenAI Whisper для транскрибации речи (поддержка множества языков, включая русский)
- Адаптация парсера транзакций для текста из голосового ввода
- Обработка специфики разговорной речи (сокращения, разговорные формы, фоновые шумы)
- Использование промежуточного формата (JSON) для хранения результатов STT с оценкой уверенности
- Набор тестовых аудио-сценариев для регрессионной проверки качества транскрибации

### Пользовательские сценарии:
- **Экстренное внесение транзакции**: Пользователь фиксирует расход сразу после покупки, не отвлекаясь на набор текста.
- **Сбор чеков после поездки**: Пользователь последовательно надиктовывает расходы за день, бот автоматически группирует их по категориям.
- **Семейный бюджет**: Несколько членов семьи отправляют голосовые сообщения, бот поддерживает идентификацию по chat_id и суммирует траты.

### Метрики успеха:
- Доля голосовых сообщений, успешно преобразованных в транзакции (>85%)
- Среднее время обработки голосового сообщения (≤5 секунд)
- Уровень удовлетворенности пользователей (опрос внутри бота)

### Потенциальные риски:
- Низкое качество звука → требует фильтрации шумов и повторных запросов к пользователю
- Зависимость от внешнего STT-провайдера → предусмотреть fallback на локальную модель или текстовые подсказки
- Акцентные и диалектные особенности → расширенный набор тестов и дообучение языковых моделей

